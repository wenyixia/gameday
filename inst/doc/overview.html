<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Wenyi Xia" />

<meta name="date" content="2014-11-21" />

<title>Overview of gameday</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link href="data:text/css,body%20%7B%0A%20%20background%2Dcolor%3A%20%23fff%3B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20max%2Dwidth%3A%20700px%3B%0A%20%20overflow%3A%20visible%3B%0A%20%20padding%2Dleft%3A%202em%3B%0A%20%20padding%2Dright%3A%202em%3B%0A%20%20font%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0A%20%20font%2Dsize%3A%2014px%3B%0A%20%20line%2Dheight%3A%201%2E35%3B%0A%7D%0A%0A%23header%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0A%0A%23TOC%20%7B%0A%20%20clear%3A%20both%3B%0A%20%20margin%3A%200%200%2010px%2010px%3B%0A%20%20padding%3A%204px%3B%0A%20%20width%3A%20400px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20border%2Dradius%3A%205px%3B%0A%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20font%2Dsize%3A%2013px%3B%0A%20%20line%2Dheight%3A%201%2E3%3B%0A%7D%0A%20%20%23TOC%20%2Etoctitle%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%20%20font%2Dsize%3A%2015px%3B%0A%20%20%20%20margin%2Dleft%3A%205px%3B%0A%20%20%7D%0A%0A%20%20%23TOC%20ul%20%7B%0A%20%20%20%20padding%2Dleft%3A%2040px%3B%0A%20%20%20%20margin%2Dleft%3A%20%2D1%2E5em%3B%0A%20%20%20%20margin%2Dtop%3A%205px%3B%0A%20%20%20%20margin%2Dbottom%3A%205px%3B%0A%20%20%7D%0A%20%20%23TOC%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dleft%3A%20%2D2em%3B%0A%20%20%7D%0A%20%20%23TOC%20li%20%7B%0A%20%20%20%20line%2Dheight%3A%2016px%3B%0A%20%20%7D%0A%0Atable%20%7B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dcolor%3A%20%23DDDDDD%3B%0A%20%20border%2Dstyle%3A%20outset%3B%0A%20%20border%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0A%20%20border%2Dwidth%3A%202px%3B%0A%20%20padding%3A%205px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%20%20line%2Dheight%3A%2018px%3B%0A%20%20padding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0A%20%20border%2Dleft%2Dstyle%3A%20none%3B%0A%20%20border%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Ap%20%7B%0A%20%20margin%3A%200%2E5em%200%3B%0A%7D%0A%0Ablockquote%20%7B%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20padding%3A%200%2E25em%200%2E75em%3B%0A%7D%0A%0Ahr%20%7B%0A%20%20border%2Dstyle%3A%20solid%3B%0A%20%20border%3A%20none%3B%0A%20%20border%2Dtop%3A%201px%20solid%20%23777%3B%0A%20%20margin%3A%2028px%200%3B%0A%7D%0A%0Adl%20%7B%0A%20%20margin%2Dleft%3A%200%3B%0A%7D%0A%20%20dl%20dd%20%7B%0A%20%20%20%20margin%2Dbottom%3A%2013px%3B%0A%20%20%20%20margin%2Dleft%3A%2013px%3B%0A%20%20%7D%0A%20%20dl%20dt%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%7D%0A%0Aul%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%7D%0A%20%20ul%20li%20%7B%0A%20%20%20%20list%2Dstyle%3A%20circle%20outside%3B%0A%20%20%7D%0A%20%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dbottom%3A%200%3B%0A%20%20%7D%0A%0Apre%2C%20code%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20color%3A%20%23333%3B%0A%7D%0Apre%20%7B%0A%20%20white%2Dspace%3A%20pre%2Dwrap%3B%20%20%20%20%2F%2A%20Wrap%20long%20lines%20%2A%2F%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20margin%3A%205px%200px%2010px%200px%3B%0A%20%20padding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Acode%20%7B%0A%20%20font%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0A%20%20font%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0A%20%20padding%3A%202px%200px%3B%0A%7D%0A%0Adiv%2Efigure%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0A%20%20background%2Dcolor%3A%20%23FFFFFF%3B%0A%20%20padding%3A%202px%3B%0A%20%20border%3A%201px%20solid%20%23DDDDDD%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20margin%3A%200%205px%3B%0A%7D%0A%0Ah1%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%20%20font%2Dsize%3A%2035px%3B%0A%20%20line%2Dheight%3A%2040px%3B%0A%7D%0A%0Ah2%20%7B%0A%20%20border%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20padding%2Dbottom%3A%202px%3B%0A%20%20font%2Dsize%3A%20145%25%3B%0A%7D%0A%0Ah3%20%7B%0A%20%20border%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20font%2Dsize%3A%20120%25%3B%0A%7D%0A%0Ah4%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0A%20%20margin%2Dleft%3A%208px%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Ah5%2C%20h6%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23ccc%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Aa%20%7B%0A%20%20color%3A%20%230033dd%3B%0A%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0A%20%20a%3Ahover%20%7B%0A%20%20%20%20color%3A%20%236666ff%3B%20%7D%0A%20%20a%3Avisited%20%7B%0A%20%20%20%20color%3A%20%23800080%3B%20%7D%0A%20%20a%3Avisited%3Ahover%20%7B%0A%20%20%20%20color%3A%20%23BB00BB%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%0A%2F%2A%20Class%20described%20in%20https%3A%2F%2Fbenjeffrey%2Ecom%2Fposts%2Fpandoc%2Dsyntax%2Dhighlighting%2Dcss%0A%20%20%20Colours%20from%20https%3A%2F%2Fgist%2Egithub%2Ecom%2Frobsimmons%2F1172277%20%2A%2F%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Keyword%20%2A%2F%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%2F%2A%20DataType%20%2A%2F%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%2F%2A%20DecVal%20%28decimal%20values%29%20%2A%2F%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20BaseN%20%2A%2F%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Float%20%2A%2F%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Char%20%2A%2F%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20String%20%2A%2F%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%2F%2A%20Comment%20%2A%2F%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%2F%2A%20OtherToken%20%2A%2F%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20AlertToken%20%2A%2F%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Function%20calls%20%2A%2F%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%2F%2A%20ErrorTok%20%2A%2F%0A%0A" rel="stylesheet" type="text/css" />

</head>

<body>



<div id="header">
<h1 class="title">Overview of gameday</h1>
<h4 class="author"><em>Wenyi Xia</em></h4>
<h4 class="date"><em>2014-11-21</em></h4>
</div>


<div id="overview-of-gameday" class="section level2">
<h2>Overview of gameday</h2>
<p>Living in a country with so many hockey lovers, you may also have the urge to check:</p>
<ul>
<li>Whether you NHL team has a gameday on a particular day?</li>
<li>What’s the game results of the NHL teams on a particular day?</li>
</ul>
<p>The gameday package could make these checks easy and fast.</p>
<p>The goal of this document is to introduce you to the basic funcitons that gameday provides.</p>
</div>
<div id="install-and-load-the-package" class="section level2">
<h2>Install and Load the package</h2>
<p>Install <code>gameday</code> from GitHub:</p>
<pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">&quot;wenyixia/gameday&quot;</span>)</code></pre>
<p>Load the package.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gameday)</code></pre>
<pre><code>## Error in library(gameday): there is no package called 'gameday'</code></pre>
</div>
<div id="play-with-the-function-gday" class="section level2">
<h2>Play with the function <code>gday()</code></h2>
<p>Let’s play with the <code>gday()</code> function.</p>
<p>After you install and load the <code>gameday</code> package, in your <code>R Console</code>, you could type <code>?gday</code> to read the documentation of this function. There are two arguments in the <code>gday()</code> function. They are <code>team</code> and <code>date</code>.</p>
<p>The default of <code>gday()</code> is <code>team = &quot;canucks&quot;</code> and <code>date = Sys.Date()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gday</span>()</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;gday&quot;</code></pre>
<p>Now you could go to the <a href="http://www.nhl.com/">NHL webpage</a> to check the information, which must be consistent with the result returned by <code>gday()</code>.</p>
<p>Let’s then play with the <code>team</code> argument.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gday</span>(<span class="st">&quot;Predators&quot;</span>)</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;gday&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gday</span>(<span class="st">&quot;Nashville&quot;</span>)</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;gday&quot;</code></pre>
<p>Team names and home city names return this same result.</p>
<p>What if the city does not have a NHL team or you make a typo in the name? It will return a error specifying the problem.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gday</span>(<span class="st">&quot;Seattle&quot;</span>)</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;gday&quot;</code></pre>
<p>How do I know that the <code>team</code> input is valid or not? Thanks to the data <code>arena_team</code> in this package. <code>arena_team</code> gives NHL Team Names with the corresponding home city and arena. Type <code>?arena_team</code> in <code>R Console</code> and you will see the detailed documentation.</p>
<p>Cases are ignored in the fucntion.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gday</span>(<span class="st">&quot;VANCOUVER&quot;</span>)</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;gday&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gday</span>(<span class="st">&quot;vancouver&quot;</span>)</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;gday&quot;</code></pre>
<p>The default of argument <code>date</code> is today. Let’s then play with the <code>date</code> argument.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gday</span>(<span class="st">&quot;Flames&quot;</span>, <span class="st">&quot;2014-11-16&quot;</span>)</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;gday&quot;</code></pre>
<p>What if the format of the <code>date</code> input is wrong? It will tell you the problem.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gday</span>(<span class="st">&quot;Flames&quot;</span>, <span class="st">&quot;201-411-116&quot;</span>)</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;gday&quot;</code></pre>
</div>
<div id="play-with-the-function-scores" class="section level2">
<h2>Play with the function <code>scores()</code></h2>
<p>As you type <code>?scores</code> in <code>R console</code>, you will know that <code>scores()</code> returns a data.frame about NHL game information on a particular day.</p>
<p>The default value is today.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">scores</span>()</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;scores&quot;</code></pre>
<p>If you want to know the game infomation on a particular day, then type in the date.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">scores</span>(<span class="st">&quot;2014-11-19&quot;</span>)</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;scores&quot;</code></pre>
<p>If your input date is an invalid date, it will give you an error like this.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">scores</span>(<span class="st">&quot;201-411-19&quot;</span>)</code></pre>
<pre><code>## Error in eval(expr, envir, enclos): could not find function &quot;scores&quot;</code></pre>
<p>Lastly, cut off your internet connection and call <code>gday()</code> or <code>scores()</code>. Both function will throw you an error telling you that there is no internet connnection.</p>
</div>
<div id="how-this-package-was-made" class="section level2">
<h2>How this package was made</h2>
<p>The <a href="http://stat545-ubc.github.io/packages02_activity.html">Class Activity 1</a> and <a href="http://stat545-ubc.github.io/packages03_activity_part2.html#vignette">Class Activity 2</a> lead us to a package that is half-made. Based on it, I recorded my workflow below.</p>
<div id="helper-function-internet_connection" class="section level4">
<h4>Helper function <code>Internet_connection()</code></h4>
<p>Following the instructions of the <a href="http://stat545-ubc.github.io/hw10_package.html">Homework</a>, I first tried to add the function <code>Internet_connection()</code>. I copied the function that is already provided in the homework.</p>
<pre><code>internet_connection &lt;- function() {
  tryCatch({RCurl::getURL(&quot;www.google.com&quot;); TRUE},
    error = function(err) FALSE)
}</code></pre>
<p>Thanks for our TAs. Otherwise I would have to spend much time to figure out this function by myself.</p>
<p>Initially, I copied this function directly to the R script <code>gday.R</code>. When I <code>build &amp; Reload</code>, the package did not know which function to export. Then I googled the problem, and found out that the helper functions could be created in a different R script. Even though the functions are in different R script, the exported function will know where to call the helper function. R package turns out to be much more smart than I thought.</p>
<p>Therefore, I added the R script of <code>Internet_connection()</code> to the <code>/R</code> folder. As I did not add any documentation such as <code>@export</code>, the package will not export this function. Then I added the <code>if()</code> and <code>stop()</code> statements that we learned from <a href="http://stat545-ubc.github.io/block011_write-your-own-function-01.html">Write your own function</a> as follows to the <code>gday.r</code></p>
<pre><code>    if(internet_connection() == FALSE) {
        stop('Sorry, unable to connect to the Internet.
                    Please check your internet connection.')
    }</code></pre>
<p>Lastly, I <code>build &amp; Reload</code>, cut off my internet connection to see if this function works, and it worked.</p>
</div>
<div id="helper-function-check_date" class="section level4">
<h4>Helper function <code>check_date()</code></h4>
<p>I followed the template of <code>Internet_connection()</code> and created the R script <code>check_date()</code> in <code>/R</code> folder. Here is my R script for <code>check_date()</code>.</p>
<pre><code>check_date &lt;- function(date){
    tryCatch({as.Date(date); TRUE},
                     error = function(err) FALSE)
}</code></pre>
<p>Before I added the helper function to <code>gday.R</code>, I tested the function by creating R script in the sub-folder <code>/tests/testthat</code> and run <code>devtools::test()</code> in the <code>R Console</code>. For example:</p>
<pre><code>test_that(&quot;The date 20141-1-17 is not a valid date&quot;, {
    expect_false(check_date(&quot;20141-1-17&quot;))
})</code></pre>
<p>I also added the context to the top of the test R script as</p>
<pre><code>context(&quot;Check helper function check_date&quot;)</code></pre>
<p>so that everytime I run <code>devtools::test()</code>, I will know which context it is testing. After the tests are passed, I add the arguments to <code>gday.R</code>.</p>
<pre><code>    if(check_date(date) == FALSE) {
        stop('Sorry, the date is invalid.')
    }</code></pre>
<p>I did not use <code>assertthat</code> as suggested in the <a href="http://stat545-ubc.github.io/hw10_package.html">Homework</a>, since <code>if()</code> and <code>stop()</code> have more informative return. Then I also add tests about <code>gday()</code>.</p>
<p>Sometimes you need to clean the objects created in <code>Environment</code> before <code>Build &amp; Reload</code>. As you run those R scripts, objects with the same names will be created in the <code>Environment</code>. Thus R sometimes gets confused about whether you are testing a function in a package or your are using the function that you created in the <code>Environment</code>.</p>
</div>
<div id="add-data-in-the-package" class="section level4">
<h4>Add data in the package</h4>
<p>I did spend sometime to figure out this part. I first read <a href="http://r-pkgs.had.co.nz/data.html">How to add date to your package</a> and get to know that the data could be just put into the subdirectory <code>/data</code>, the data format in this folder is recommended to be <code>.rdata</code>, and that if there are some raw data, it could be put in the subdirectoy <code>/data-raw</code> with the R scripts that clean and reshape the data. I also followed the <a href="https://github.com/hadley/babynames/blob/master/data-raw/applicants.R">R scripts in data-raw</a> of <a href="https://github.com/hadley/babynames">babynames Package</a> from <a href="https://github.com/hadley">Hadley Wickham’s Github</a> to create data in <code>.rdata</code> format like <code>save(arena_team, file = &quot;data/arena_team.rdata&quot;)</code>.</p>
<p>However, how should I read <code>arena_team.rdata</code>? I consulted the <a href="https://github.com/jennybc/gapminder">gapminder package</a> as suggested by Bernhard. The R scripts seem to just directly call the name of the data. There is no read-data argument such as <code>read.sdata</code>. I also tried it this way, and it worked. The only possible problem is when you <code>Build &amp; Reload</code>, there would be warning messages saying that there is no documentation for the data. Then I added the documentation for <code>arena_team</code> following <a href="https://github.com/jennybc/gapminder/blob/master/R/country_colors.R">R script</a> in <a href="https://github.com/jennybc/gapminder">gapminder package</a>.</p>
</div>
<div id="helper-function-check_team" class="section level4">
<h4>Helper function <code>check_team()</code></h4>
<p>This helper function also serves the purpose to test the whether I can load the data. The R script is like this:</p>
<pre><code>check_team &lt;- function(team){
    any(grepl(team, arena_team$team, ignore.case = TRUE))
}
</code></pre>
</div>
<div id="function-gday" class="section level4">
<h4>Function <code>gday()</code></h4>
<p>After all the helper functions are done with no unexpected error reported, the <code>gday()</code> function finally looks likes this:</p>
<pre><code>gday &lt;- function(team = &quot;canucks&quot;, date = Sys.Date()) {
    if(internet_connection() == FALSE) {
        stop('Sorry, unable to connect to the Internet.
                    Please check your internet connection.')
    }
    if(check_date(date) == FALSE) {
        stop('Sorry, the date is invalid.')
    }
    if(check_team(team) == FALSE) {
        stop('Sorry, the city does not have an NHL team or the name has a typo.')
    }
    url &lt;- paste0(&quot;http://live.nhle.com/GameData/GCScoreboard/&quot;, date, &quot;.jsonp&quot;)
    grepl(team, RCurl::getURL(url), ignore.case=TRUE)
}
</code></pre>
</div>
<div id="function-scores" class="section level4">
<h4>Function <code>scores()</code></h4>
<p>The <code>scores()</code> function finally looks like this:</p>
<pre><code>scores &lt;- function(date = Sys.Date()){
    if(internet_connection() == FALSE) {
        stop('Sorry, unable to connect to the Internet.
                    Please check your internet connection.')
    }
    if(check_date(date) == FALSE) {
        stop('Sorry, the date is invalid.')
    }
    url &lt;- paste0(&quot;http://live.nhle.com/GameData/GCScoreboard/&quot;, date, &quot;.jsonp&quot;)
    raw &lt;- RCurl::getURL(url)
    json &lt;- gsub('([a-zA-Z_0-9\\.]*\\()|(\\);?$)', &quot;&quot;, raw, perl = TRUE)
    data &lt;- jsonlite::fromJSON(json)$games
    with(data,
             data.frame(home = paste(htn, htcommon),
                                 away = paste(atn, atcommon),
                                 home_score = hts,
                                 away_score = ats))
}
</code></pre>
</div>
<div id="test-the-package" class="section level4">
<h4>Test the package</h4>
<p>I created several test R scripts in the sub-directory <code>/tests/testthat</code>, each with a different context. I put this section in the end, but it does not mean that this is the last thing to do. I tested interactively the creation of functions.</p>
</div>
</div>
<div id="reflections" class="section level2">
<h2>Reflections</h2>
<p>The homework provides a great hands-on activity of building an R package that for students not in STAT department, they would rarely have the opportunity to experience. With the helpful TAs, I resolved all the problems encountered during the process. A lots of useful resources are provided in the <a href="http://stat545-ubc.github.io/packages00_index.html">package page</a> that I could dig deeper later on.</p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
